version: '3'

services:
 app:
  build: .
  ports:
    - "80:80"
  depends_on:
    - minio
    - db

 db:
  image: postgres
  container_name: postgres
  restart: always
  environment:
  - POSTGRES_USER=postgres
  - POSTGRES_PASSWORD=postgres
  ports:
    - "5432:5432"
  volumes:
    - postgres:/postgresql

 minio:
  image: quay.io/minio/minio:latest
  hostname: minio
  command: minio server --console-address ":9090" /data
  ports:
    - ":9000:9000"
    - ":9090:9090"
  volumes:
    - minio:/minio

volumes:
  postgres:
    driver: local
  minio:
    driver: local
